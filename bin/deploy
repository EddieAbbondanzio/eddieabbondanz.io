#!/usr/bin/env bash

echo "Building site"
bin/build

if [[ -n "$(git status --porcelain)" ]]; then
  echo ""
  echo "No changes to deploy."
  echo "Goodbye!"
  echo ""
  exit 1
fi

cd public;

git add *
DATETIME="$(date +%Y-%m-%dT%H:%M:%S%z)"
git commit -m "Deploy-$DATETIME"
git push

echo "Pushed $DATETIME to Github. GH pages deploy started."